v 20150401 2
C 31600 26500 1 180 1 opamp-1.sym
{
T 32400 25500 5 10 1 1 0 0 1
value=LMC662
T 32300 27300 5 10 0 0 0 0 1
device=OPAMP
T 32400 25700 5 10 1 1 0 0 1
refdes=U1
T 32300 27900 5 10 0 0 0 0 1
symversion=0.2
}
C 33600 20700 1 270 0 capacitor-1.sym
{
T 33800 21400 5 10 0 0 0 0 1
device=CAPACITOR
T 33900 20400 5 10 1 1 0 0 1
refdes=C1
T 33800 21600 5 10 0 0 0 0 1
symversion=0.1
}
C 34200 20700 1 270 0 capacitor-1.sym
{
T 34400 21400 5 10 0 0 0 0 1
device=CAPACITOR
T 34500 20400 5 10 1 1 0 0 1
refdes=C2
T 34400 21600 5 10 0 0 0 0 1
symversion=0.1
}
C 34800 20700 1 270 0 capacitor-1.sym
{
T 35000 21400 5 10 0 0 0 0 1
device=CAPACITOR
T 35100 20400 5 10 1 1 0 0 1
refdes=C3
T 35000 21600 5 10 0 0 0 0 1
symversion=0.1
}
C 35400 20700 1 270 0 capacitor-1.sym
{
T 35600 21400 5 10 0 0 0 0 1
device=CAPACITOR
T 35700 20400 5 10 1 1 0 0 1
refdes=C4
T 35600 21600 5 10 0 0 0 0 1
symversion=0.1
}
C 36000 20700 1 270 0 capacitor-1.sym
{
T 36200 21400 5 10 0 0 0 0 1
device=CAPACITOR
T 36300 20400 5 10 1 1 0 0 1
refdes=C5
T 36200 21600 5 10 0 0 0 0 1
symversion=0.1
}
C 36600 20700 1 270 0 capacitor-1.sym
{
T 36800 21400 5 10 0 0 0 0 1
device=CAPACITOR
T 36900 20400 5 10 1 1 0 0 1
refdes=C6
T 36800 21600 5 10 0 0 0 0 1
symversion=0.1
}
C 37200 20700 1 270 0 capacitor-1.sym
{
T 37400 21400 5 10 0 0 0 0 1
device=CAPACITOR
T 37500 20400 5 10 1 1 0 0 1
refdes=C7
T 37400 21600 5 10 0 0 0 0 1
symversion=0.1
}
C 37800 20700 1 270 0 capacitor-1.sym
{
T 38000 21400 5 10 0 0 0 0 1
device=CAPACITOR
T 38100 20400 5 10 1 1 0 0 1
refdes=C8
T 38000 21600 5 10 0 0 0 0 1
symversion=0.1
}
N 33800 20700 33800 20800 4
N 33800 20800 33300 20800 4
N 34400 20700 34400 21100 4
N 34400 21100 33300 21100 4
N 33300 21400 35000 21400 4
N 35000 21400 35000 20700 4
N 35600 20700 35600 21700 4
N 35600 21700 33300 21700 4
N 33300 22000 36200 22000 4
N 36200 22000 36200 20700 4
N 36800 20700 36800 22300 4
N 36800 22300 33300 22300 4
N 33300 22600 37400 22600 4
N 37400 22600 37400 20700 4
N 38000 20700 38000 22900 4
N 38000 22900 33300 22900 4
N 31300 21900 30700 21900 4
N 30400 26300 31600 26300 4
N 32600 26100 33600 26100 4
N 33100 26100 33100 27100 4
N 33100 27100 32600 27100 4
C 29500 25800 1 0 0 resistor-1.sym
{
T 29700 25400 5 10 1 1 0 0 1
value=47K
T 29800 26200 5 10 0 0 0 0 1
device=RESISTOR
T 29700 25600 5 10 1 1 0 0 1
refdes=R1
}
C 32000 23800 1 0 0 gnd-1.sym
N 30400 20800 31300 20800 4
C 35800 19200 1 0 0 gnd-1.sym
N 33800 19800 33800 19600 4
N 33800 19600 35900 19600 4
N 35900 19600 35900 19500 4
N 38000 19800 38000 19600 4
N 38000 19600 35900 19600 4
N 35900 19600 34400 19600 4
N 34400 19800 34400 19600 4
N 34400 19600 35000 19600 4
N 35000 19800 35000 19600 4
N 35000 19600 35600 19600 4
N 35600 19800 35600 19600 4
N 35600 19600 36200 19600 4
N 36200 19800 36200 19600 4
N 36200 19600 36800 19600 4
N 36800 19600 36800 19800 4
N 36800 19600 37400 19600 4
N 37400 19800 37400 19600 4
N 37400 19600 35900 19600 4
N 29100 22900 31300 22900 4
N 29100 22600 31300 22600 4
N 31300 22300 29100 22300 4
C 26800 20800 1 0 0 gnd-1.sym
C 31900 26500 1 0 0 vdd-1.sym
C 18400 22000 1 0 0 resistor-1.sym
{
T 18700 21800 5 10 1 1 0 0 1
10K
T 18700 22400 5 10 0 0 0 0 1
device=RESISTOR
T 18700 22300 5 10 1 1 0 0 1
refdes=R2
}
T 16600 23000 9 10 1 0 0 0 1
50/60Hz mains frequency
T 16600 22800 9 10 1 0 0 0 1
at CMOS logic levels
T 38200 20900 9 10 1 0 0 0 1
8 X 1uF Plastic
T 24000 30900 9 10 1 0 0 0 1
COMMUTATING FILTER PHASE-LOCKED TO MAINS FREQUENCY
C 22400 19500 1 0 0 4046-1.sym
{
T 22701 23050 5 10 0 0 0 0 1
device=4046
T 24100 22900 5 10 1 1 0 6 1
refdes=U2
T 22700 23250 5 10 0 0 0 0 1
footprint=DIP16
}
N 27100 21300 26900 21300 4
N 26900 21300 26900 21100 4
N 24400 21600 27100 21600 4
C 25500 19200 1 270 0 resistor-1.sym
{
T 26200 19200 5 10 0 0 270 0 1
footprint=0402
T 25800 18600 5 10 1 1 0 0 1
value=220K
T 26000 19200 5 10 0 0 270 0 1
device=RESISTOR
T 25800 18800 5 10 1 1 0 0 1
refdes=R3
}
C 24900 19200 1 270 0 capacitor-1.sym
{
T 24950 18250 5 10 0 1 270 0 1
footprint=0402
T 24700 18600 5 10 1 1 0 6 1
value=33nF
T 25600 19000 5 10 0 0 270 0 1
device=CAPACITOR
T 24700 18800 5 10 1 1 0 6 1
refdes=C9
T 25800 19000 5 10 0 0 270 0 1
symversion=0.1
}
N 25100 18300 25100 18100 4
N 25100 18100 24800 18100 4
N 24800 18100 24800 20400 4
N 24800 20400 24400 20400 4
N 24400 20700 25100 20700 4
N 25100 20700 25100 19200 4
N 25600 19200 25600 21000 4
N 25600 21000 24400 21000 4
N 25600 18300 25600 18100 4
C 25500 17800 1 0 0 gnd-1.sym
C 22900 23100 1 0 0 resistor-1.sym
{
T 23500 23400 5 10 1 1 0 0 1
value=100K
T 23200 23500 5 10 0 0 0 0 1
device=RESISTOR
T 23100 23400 5 10 1 1 0 0 1
refdes=R4
}
C 21900 19200 1 270 0 capacitor-1.sym
{
T 21950 18250 5 10 0 1 270 0 1
footprint=0402
T 22400 18600 5 10 1 1 0 0 1
value=6n8F
T 22600 19000 5 10 0 0 270 0 1
device=CAPACITOR
T 22400 18800 5 10 1 1 0 0 1
refdes=C10
T 22800 19000 5 10 0 0 270 0 1
symversion=0.1
}
C 22000 17800 1 0 0 gnd-1.sym
N 22100 18100 22100 18300 4
N 22100 19200 22100 23200 4
N 22100 23200 22900 23200 4
N 23800 23200 24600 23200 4
N 24600 23200 24600 22500 4
N 24600 22500 24400 22500 4
N 22400 21500 22100 21500 4
C 31300 20600 1 0 0 4051-1.sym
{
T 31600 23450 5 10 0 0 0 0 1
device=4051
T 33000 23300 5 10 1 1 0 6 1
refdes=U3
T 31600 23650 5 10 0 0 0 0 1
footprint=DIL16
}
N 21800 22200 22400 22200 4
N 19500 22500 22400 22500 4
N 22400 20400 21100 20400 4
N 21100 18100 21100 21500 4
C 19900 27700 1 0 0 ICL7660-1.sym
{
T 21700 29200 5 10 0 0 0 0 1
device=icl7660
T 21600 29300 5 10 1 1 0 6 1
refdes=U4
}
C 21000 17800 1 0 0 gnd-1.sym
C 22600 27700 1 270 0 capacitor-2.sym
{
T 23200 27200 5 10 1 1 0 0 1
value=22uF
T 22800 28400 5 10 0 0 0 0 1
device=POLARIZED_CAPACITOR
T 23200 27400 5 10 1 1 0 0 1
refdes=C11
T 22800 28600 5 10 0 0 0 0 1
symversion=0.1
}
C 23400 29800 1 270 0 capacitor-2.sym
{
T 23900 29300 5 10 1 1 0 0 1
value=22uF
T 23600 30500 5 10 0 0 0 0 1
device=POLARIZED_CAPACITOR
T 23900 29500 5 10 1 1 0 0 1
refdes=C12
T 23600 30700 5 10 0 0 0 0 1
symversion=0.1
}
C 24300 27700 1 270 0 capacitor-2.sym
{
T 24900 27200 5 10 1 1 0 0 1
value=22uF
T 24500 28400 5 10 0 0 0 0 1
device=POLARIZED_CAPACITOR
T 24800 27400 5 10 1 1 0 0 1
refdes=C13
T 24500 28600 5 10 0 0 0 0 1
symversion=0.1
}
C 23500 28400 1 0 0 gnd-1.sym
C 20800 25900 1 0 0 gnd-1.sym
N 21900 28900 22000 28900 4
N 22000 28900 22000 30000 4
N 22000 30000 24100 30000 4
N 23600 28900 23600 28700 4
N 19900 28000 19700 28000 4
N 19700 28000 19700 26300 4
N 22000 26300 22000 28000 4
N 19700 26300 24500 26300 4
N 21900 28000 22000 28000 4
C 23300 27800 1 0 0 diode-1.sym
{
T 24000 27800 5 10 0 1 0 0 1
value=1N4148
T 23900 28500 5 10 0 1 0 0 1
footprint=DO-214
T 24300 27850 5 10 0 0 0 0 1
symversion=0.5
T 23700 28400 5 10 0 0 0 0 1
device=DIODE
T 23800 28300 5 10 1 1 0 0 1
refdes=D2
}
C 22600 29400 1 270 0 diode-1.sym
{
T 22600 28700 5 10 0 1 270 0 1
value=1N4148
T 23300 28800 5 10 0 1 270 0 1
footprint=DO-214
T 22650 28400 5 10 0 0 270 0 1
symversion=0.5
T 23000 30000 5 10 0 0 0 0 1
device=DIODE
T 22900 29300 5 10 1 1 0 0 1
refdes=D1
}
N 21900 28600 22400 28600 4
N 22400 26600 22400 28600 4
N 23300 28000 22800 28000 4
N 22800 27700 22800 28500 4
N 22800 29400 22800 30000 4
N 22400 26600 22800 26600 4
N 22800 26600 22800 26800 4
N 24200 28000 25000 28000 4
N 24500 27700 24500 28000 4
N 24500 26300 24500 26800 4
N 23600 29800 23600 30000 4
T 24300 30000 9 10 1 0 0 0 1
8V dc in
T 24900 28200 9 10 1 0 0 0 1
Vdd = 15V dc
C 31000 28200 1 270 0 resistor-1.sym
{
T 30900 27700 5 10 1 1 0 6 1
value=100K
T 31300 28600 5 10 0 0 0 0 1
device=RESISTOR
T 30900 27900 5 10 1 1 0 6 1
refdes=R5
}
C 31000 25400 1 270 0 resistor-1.sym
{
T 31700 25400 5 10 0 0 270 0 1
footprint=0402
T 31300 24800 5 10 1 1 0 0 1
value=100K
T 31500 25400 5 10 0 0 270 0 1
device=RESISTOR
T 31300 25000 5 10 1 1 0 0 1
refdes=R6
}
N 31100 24500 31100 24300 4
C 27700 27100 1 0 0 vdd-1.sym
T 25300 25800 9 10 1 0 0 0 1
unfiltered Vin
T 33700 26200 9 10 1 0 0 0 1
comb-filtered Vout
C 30300 20100 1 0 0 gnd-1.sym
N 30400 20800 30400 20400 4
T 32000 30100 9 10 1 0 0 0 9
This op-amp may want to be dc isolated from the input which currently
runs over dual 8V rails instead.  Similarly, the output might want to
be tailored to a 5V only (for example) control unit input.
This depth of 8 points around the commutator will yield a theoretical
maximum filter effect of 8x6=48dB, but extending this to 16 or more
bits is not out of the question

Good long term design takes care of these voltage shifts in one hit
but of course, this is just a bodged up test cct...
C 27100 19600 1 0 0 4040-1.sym
{
T 27400 23750 5 10 0 0 0 0 1
device=4040
T 28800 23600 5 10 1 1 0 6 1
refdes=U5
T 27400 23950 5 10 0 0 0 0 1
footprint=DIP16
}
N 29400 22300 29400 23800 4
N 21800 23800 29400 23800 4
T 24500 21700 9 10 1 0 0 0 1
Fc = 16*50 = 800 Hz
T 20400 25100 9 10 1 0 0 0 1
PLL Calculations
T 19600 24800 9 10 1 0 0 0 1
Fcentre = 800Hz, Fmin = 40*16 = 640, Fmax = 70*16=1120
T 19600 24500 9 10 1 0 0 0 1
Flock = (1120-640)/2 = 240 Hz = Fcapture
T 19600 24200 9 10 1 0 0 0 1
for Rlpf = 100K, Clpf = 1/(2*pi*Rlpf*240) = (1/(4.8*pi)) * 10^-7 = 6.8nF
T 16700 22600 9 10 1 0 0 0 1
(ca. 12VAC peak)
N 21800 22200 21800 23800 4
N 31100 28400 31100 28200 4
C 31700 26900 1 0 0 capacitor-1.sym
{
T 32000 27400 5 10 1 1 0 0 1
33nF
T 31900 27600 5 10 0 0 0 0 1
device=CAPACITOR
T 32000 27600 5 10 1 1 0 0 1
refdes=C14
T 31900 27800 5 10 0 0 0 0 1
symversion=0.1
}
N 30700 21900 30700 25900 4
N 31700 27100 30700 27100 4
N 30700 27100 30700 26300 4
C 29500 26200 1 0 0 resistor-1.sym
{
T 29700 26500 5 10 1 1 0 0 1
value=47K
T 29800 26600 5 10 0 0 0 0 1
device=RESISTOR
T 29700 26700 5 10 1 1 0 0 1
refdes=R7
}
N 30400 25900 31600 25900 4
N 31100 25400 31100 25900 4
N 31100 27300 31100 25900 4
T 29800 22900 9 10 1 0 0 0 1
200Hz
T 29800 22600 9 10 1 0 0 0 1
100Hz
T 29900 22300 9 10 1 0 0 0 1
50Hz
T 33100 27400 9 10 1 0 0 0 1
post-commutator lowpass rolls off at 100 Hz
T 31100 18200 9 10 1 0 0 0 1
Disadvantage with using 200/100/50 Hz in is low freq. to filter out
C 16800 20600 1 0 0 pwrxfmr-1.sym
{
T 17100 22300 5 10 1 1 0 0 1
refdes=T1
T 17100 22500 5 10 0 0 0 0 1
device=transformer
}
N 16400 21700 16400 22100 4
N 16400 22100 16800 22100 4
N 16800 21500 16700 21500 4
N 16700 21500 16700 21300 4
N 16700 21300 16800 21300 4
N 16800 20700 16400 20700 4
N 16400 20700 16400 21100 4
C 15000 20900 1 0 0 cord-plug-1.sym
{
T 15400 22200 5 10 0 1 0 0 1
footprint=2WIRES
T 15700 21400 5 10 0 1 0 3 1
symversion=1.2
T 15400 22000 5 10 1 1 0 0 1
refdes=CONN1
T 15400 22200 5 10 0 0 0 0 1
device=MAINS_CONNECTOR
}
C 18400 21400 1 0 0 resistor-1.sym
{
T 18700 21000 5 10 1 1 0 0 1
10K
T 18700 21800 5 10 0 0 0 0 1
device=RESISTOR
T 18700 21200 5 10 1 1 0 0 1
refdes=R8
}
N 19300 22100 19500 22100 4
N 19500 22000 19500 22500 4
N 20700 22000 21000 22000 4
N 21000 22000 21000 23600 4
N 19300 21500 19500 21500 4
N 20700 21500 21100 21500 4
T 20600 23800 9 10 1 0 0 0 1
8V dc in
C 26300 19200 1 270 0 resistor-1.sym
{
T 27000 19200 5 10 0 0 270 0 1
footprint=0402
T 26600 18600 5 10 1 1 0 0 1
value=100K
T 26800 19200 5 10 0 0 270 0 1
device=RESISTOR
T 26600 18800 5 10 1 1 0 0 1
refdes=R9
}
N 24400 21300 26400 21300 4
N 26400 21300 26400 19200 4
N 26400 18300 26400 18100 4
C 26300 17800 1 0 0 gnd-1.sym
T 24000 17600 9 10 1 0 0 0 1
Don't believe the data sheets.  You DO need R2
C 27400 26300 1 180 1 opamp-1.sym
{
T 28200 25300 5 10 1 1 0 0 1
value=LMC662
T 28100 27100 5 10 0 0 0 0 1
device=OPAMP
T 28200 25500 5 10 1 1 0 0 1
refdes=U6
T 28100 27700 5 10 0 0 0 0 1
symversion=0.2
}
N 27400 26100 27100 26100 4
N 27100 26100 27100 26600 4
N 27100 26600 28600 26600 4
N 28600 26600 28600 25900 4
N 28400 25900 29500 25900 4
N 25900 25700 27400 25700 4
N 26700 25700 26700 27000 4
N 26700 27000 29100 27000 4
N 29100 27000 29100 26300 4
N 29100 26300 29500 26300 4
C 30900 28400 1 0 0 vdd-1.sym
C 27800 24900 1 0 0 gnd-1.sym
N 27900 25200 27900 25500 4
N 27900 26300 27900 27100 4
T 31100 18000 9 10 1 0 0 0 1
This is obvious in the built up version :-(
C 31700 28000 1 0 0 resistor-1.sym
{
T 31900 28300 5 10 1 1 0 0 1
value=47K
T 32000 28400 5 10 0 0 0 0 1
device=RESISTOR
T 31900 28500 5 10 1 1 0 0 1
refdes=R10
}
N 31100 24300 32100 24300 4
N 32100 25700 32100 24100 4
N 31700 28100 31500 28100 4
N 31500 28100 31500 27100 4
N 32800 28100 32600 28100 4
N 32800 28100 32800 27100 4
C 19500 21300 1 0 0 bridge-1.sym
{
T 19700 22300 5 10 1 1 0 0 1
refdes=U7
T 19700 22700 5 10 0 0 0 0 1
device=bridge
T 19700 23100 5 10 0 0 0 0 1
symversion=0.1
}
N 18300 22100 18400 22100 4
N 18300 21500 18400 21500 4
T 24700 30600 9 10 1 0 0 0 1
THIS SCHEMATIC WAS DRAWN BY ARNIM LITTEK
C 10000 13200 0 0 0 title-D.sym
N 20900 26300 20900 26200 4
